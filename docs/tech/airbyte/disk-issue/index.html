<!doctype html><html lang=ko-kr dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들
  #


  

  개요
  #

Airbyte를 EC2에서 운영하다보면 어느 시점에 할당한 디스크 용량이 부족한 경우가 발생할 때가 있습니다. 해당 이슈를 탐지하지 못하는 경우에 디스크 용량이 꽉차게 되어 Airbyte가 동작하지 않는 상황이 발생할 수 있습니다. 이 경우 CDC(Change Data Capture)가 정지되기 때문에 미리 대응하는 것이 중요합니다.


  Airbyte 운용 시 디스크 용량을 많이 차지하는 요소 확인
  #

Airbyte는 Source와 Destination을 연결하는 커넥터를 설정 후 사용하는 방식입니다. 각각은 도커 컨테이너로 구성되어 있고 커넥터의 업데이트 시에는 컨테이너 이미지를 다운로드 받아 사용합니다. 사용자가 설정한 시간에 각 단위 별로 커넥터가 동작하는 것을 Task라 하는데, 동작하는 위치마다 로그가 발생하게 됩니다."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://devseunggwan.github.io/docs/tech/airbyte/disk-issue/"><meta property="og:site_name" content="devseunggwan"><meta property="og:title" content="Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들"><meta property="og:description" content="Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들 # 개요 # Airbyte를 EC2에서 운영하다보면 어느 시점에 할당한 디스크 용량이 부족한 경우가 발생할 때가 있습니다. 해당 이슈를 탐지하지 못하는 경우에 디스크 용량이 꽉차게 되어 Airbyte가 동작하지 않는 상황이 발생할 수 있습니다. 이 경우 CDC(Change Data Capture)가 정지되기 때문에 미리 대응하는 것이 중요합니다.
Airbyte 운용 시 디스크 용량을 많이 차지하는 요소 확인 # Airbyte는 Source와 Destination을 연결하는 커넥터를 설정 후 사용하는 방식입니다. 각각은 도커 컨테이너로 구성되어 있고 커넥터의 업데이트 시에는 컨테이너 이미지를 다운로드 받아 사용합니다. 사용자가 설정한 시간에 각 단위 별로 커넥터가 동작하는 것을 Task라 하는데, 동작하는 위치마다 로그가 발생하게 됩니다."><meta property="og:locale" content="ko_kr"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-05-13T20:36:38+09:00"><title>Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들 | devseunggwan</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://devseunggwan.github.io/docs/tech/airbyte/disk-issue/><link rel=stylesheet href=/book.min.d5c02c6e6410f6e4b2003a1c54170554f18e507efdc1850ce6fe85ce32f50496.css integrity="sha256-1cAsbmQQ9uSyADocVBcFVPGOUH79wYUM5v6FzjL1BJY=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.7d65a475a48172ceb58877b477af23f35d2ded8d6bf5d4ebeee295f2d26103e9.js integrity="sha256-fWWkdaSBcs61iHe0d68j810t7Y1r9dTr7uKV8tJhA+k=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>devseunggwan</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>Tech</span><ul><li><input type=checkbox id=section-a60fa73ba0ca5091982e66ba30dd6598 class=toggle checked>
<label for=section-a60fa73ba0ca5091982e66ba30dd6598 class="flex justify-between"><a role=button>Airbyte</a></label><ul><li><a href=/docs/tech/airbyte/installation/>Installation</a></li><li><a href=/docs/tech/airbyte/mysql-to-snowflake/>Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항</a></li><li><a href=/docs/tech/airbyte/disk-issue/ class=active>Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들</a></li></ul></li><li><input type=checkbox id=section-0df090beb6b8424476a21f6272de6438 class=toggle>
<label for=section-0df090beb6b8424476a21f6272de6438 class="flex justify-between"><a role=button>AWS</a></label><ul><li><a href=/docs/tech/aws/aws-lambda/>AWS Lambda 사용 경험 정리</a></li></ul></li><li><input type=checkbox id=section-57ccde6e58abfd82b4c0c706b6cd1770 class=toggle>
<label for=section-57ccde6e58abfd82b4c0c706b6cd1770 class="flex justify-between"><a role=button>Git</a></label><ul><li><a href=/docs/tech/git/gitleaks/>Gitleaks를 사용한 Git 비밀 유출 검사, 사용법</a></li></ul></li><li><input type=checkbox id=section-e13c1742298c6a8c23cd403840d50c94 class=toggle>
<label for=section-e13c1742298c6a8c23cd403840d50c94 class="flex justify-between"><a role=button>JS7 JobScheduler</a></label><ul><li><a href=/docs/tech/js7-jobscheduler/introduce/>Introduce</a></li><li><a href=/docs/tech/js7-jobscheduler/installation/>Installation</a></li><li><a href=/docs/tech/js7-jobscheduler/configuration/>Configuration</a></li></ul></li><li><input type=checkbox id=section-a85f1e2bfc3e5f90a036e102e5e53c6f class=toggle>
<label for=section-a85f1e2bfc3e5f90a036e102e5e53c6f class="flex justify-between"><a role=button>Langchain</a></label><ul><li><a href=/docs/tech/langchain/issue-unstructuredurlloader/>UnstructuredURLLoader 무한 로딩 해결</a></li></ul></li><li><input type=checkbox id=section-711ce98c05a75c48054a4227d171306e class=toggle>
<label for=section-711ce98c05a75c48054a4227d171306e class="flex justify-between"><a role=button>Python</a></label><ul><li><a href=/docs/tech/python/vscode-python-failed-to-resolve-env/>VSCode Python 익스텐션 에러 트러블 슈팅 (Failed to resolve env)</a></li><li><a href=/docs/tech/python/python-rocky-linux-installation/>폐쇄망에 Python 설치 (Rocky Linux 8.10, UV 사용)</a></li></ul></li></ul></li><li class=book-section-flat><span>Book</span><ul><li><input type=checkbox id=section-f41dde8d67e63c2fc20fc13a03f84626 class=toggle>
<label for=section-f41dde8d67e63c2fc20fc13a03f84626 class="flex justify-between"><a role=button>가상 면접 사례로 알아보는 대규모 시스템 설계 기초 1</a></label><ul></ul></li><li><input type=checkbox id=section-cb6caec5d5cb6384bd3b84b7946900c3 class=toggle>
<label for=section-cb6caec5d5cb6384bd3b84b7946900c3 class="flex justify-between"><a role=button>랄프 킴벌의 데이터 웨어하우스 툴킷(The Warehouse Toolkit)</a></label><ul></ul></li></ul></li><li class=book-section-flat><span>Think</span><ul></ul></li><li class=book-section-flat><span>Conference</span><ul></ul></li></ul><ul><li><a href=https://github.com/devseunggwan target=_blank rel=noopener>Github</a></li><li><a href=https://www.linkedin.com/in/seunggwan target=_blank rel=noopener>Linkedin</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#airbyte-운용-시-디스크-용량이-많이-찼을-때-확인해볼-수-있는-것들>Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들</a><ul><li><a href=#개요><strong>개요</strong></a></li><li><a href=#airbyte-운용-시-디스크-용량을-많이-차지하는-요소-확인><strong>Airbyte 운용 시 디스크 용량을 많이 차지하는 요소 확인</strong></a></li><li><a href=#airbyte-컨테이너-내부-확인><strong>Airbyte 컨테이너 내부 확인</strong></a></li><li><a href=#한계점><strong>한계점</strong></a></li><li><a href=#reference><strong>Reference</strong></a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=airbyte-운용-시-디스크-용량이-많이-찼을-때-확인해볼-수-있는-것들>Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들
<a class=anchor href=#airbyte-%ec%9a%b4%ec%9a%a9-%ec%8b%9c-%eb%94%94%ec%8a%a4%ed%81%ac-%ec%9a%a9%eb%9f%89%ec%9d%b4-%eb%a7%8e%ec%9d%b4-%ec%b0%bc%ec%9d%84-%eb%95%8c-%ed%99%95%ec%9d%b8%ed%95%b4%eb%b3%bc-%ec%88%98-%ec%9e%88%eb%8a%94-%ea%b2%83%eb%93%a4>#</a></h1><p><img src="https://upload.cafenono.com/image/slashpagePost/20241110/222409_PEKV2oTgrEwYaBqdDl?q=80%5c&amp;s=1280x180%5c&amp;t=outside%5c&amp;f=webp" alt=images></p><h2 id=개요><strong>개요</strong>
<a class=anchor href=#%ea%b0%9c%ec%9a%94>#</a></h2><p>Airbyte를 EC2에서 운영하다보면 어느 시점에 할당한 디스크 용량이 부족한 경우가 발생할 때가 있습니다. 해당 이슈를 탐지하지 못하는 경우에 디스크 용량이 꽉차게 되어 Airbyte가 동작하지 않는 상황이 발생할 수 있습니다. 이 경우 <code>CDC(Change Data Capture)</code>가 정지되기 때문에 미리 대응하는 것이 중요합니다.</p><hr><h2 id=airbyte-운용-시-디스크-용량을-많이-차지하는-요소-확인><strong>Airbyte 운용 시 디스크 용량을 많이 차지하는 요소 확인</strong>
<a class=anchor href=#airbyte-%ec%9a%b4%ec%9a%a9-%ec%8b%9c-%eb%94%94%ec%8a%a4%ed%81%ac-%ec%9a%a9%eb%9f%89%ec%9d%84-%eb%a7%8e%ec%9d%b4-%ec%b0%a8%ec%a7%80%ed%95%98%eb%8a%94-%ec%9a%94%ec%86%8c-%ed%99%95%ec%9d%b8>#</a></h2><p>Airbyte는 <code>Source</code>와 <code>Destination</code>을 연결하는 커넥터를 설정 후 사용하는 방식입니다. 각각은 도커 컨테이너로 구성되어 있고 커넥터의 업데이트 시에는 컨테이너 이미지를 다운로드 받아 사용합니다. 사용자가 설정한 시간에 각 단위 별로 커넥터가 동작하는 것을 Task라 하는데, 동작하는 위치마다 로그가 발생하게 됩니다.</p><p>Task에서 발생하는 리텐션 기간이 30일로 기본값으로 잡혀있습니다. 기본적으로 리텐션 기간 이전까지는 운영 시 로그가 비교적 많이 적재됩니다. 적재 주기와 리텐션 기간을 고려하여 처음에 디스크 용량 산정 시 넉넉하게 주는 것이 좋습니다.</p><p>하지만 한달 이후로 운영하다보면 계속적으로 조금씩 Airbyte 컨테이너 용량이 증가하는 것을 확인하실 수 있습니다. 이를 확인하기 위해서 컨테이너 별 용량을 확인해야 합니다.</p><pre tabindex=0><code>docker ps --size --format &#34;table {{.ID}}\t{{.Image}}\t{{.Size}}&#34;
</code></pre><p>용량을 확인했을 때 많이 차지하는 컨테이너는 <code>airbyte-server</code> 와 <code>airbyte-worker</code> 로 확인했습니다.</p><hr><h2 id=airbyte-컨테이너-내부-확인><strong>Airbyte 컨테이너 내부 확인</strong>
<a class=anchor href=#airbyte-%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88-%eb%82%b4%eb%b6%80-%ed%99%95%ec%9d%b8>#</a></h2><p>이후 컨테이너 내부로 들어가서 어떤 데이터가 용량을 많이 차지하는 지 확인해야 했습니다.</p><pre tabindex=0><code>docker exec -it airbyte-server /bin/bash
</code></pre><p><code>airbyte-server</code>에 들어갔을 때 있었던 파일들은 다음과 같습니다. (<code>airbyte-worker</code> 도 상황은 동일하였습니다.)</p><pre tabindex=0><code>ls -alh

total 200G
drwxr-xr-x 1 root root 4.0K Oct  4 02:47 .
drwxr-xr-x 1 root root 4.0K Mar  4  2024 ..
drwxr-xr-x 1 root root 4.0K Jan  2  1970 airbyte-app
-rw-r--r-- 1 root root 200G Oct  4 04:14 build.log
drwxr-xr-x 2 root root 4.0K Mar  4  2024 configs
-rw------- 1 root root  28M Dec  7  2023 dd-java-agent.jar
-rw------- 1 root root  18M Nov 18  2023 opentelemetry-javaagent.jartext
</code></pre><p>두 컨테이너에서 모두 <code>build.log</code> 파일이 비대하게 적재되어 있는 부분을 확인했습니다. 로그 파일에서는 내부에서 동작하는 부분에 대해서 로그를 남기고 이상 발생 시 트래킹 할 수 있도록 구성되어 있었습니다.</p><p>해당 로그는 운영에 이상을 주기 때문에 S3로 백업 후 삭제하였고, <code>docker compose restart</code> 로 컨테이너를 재부팅하여 삭제된 로그의 캐시를 제거하였습니다.</p><hr><h2 id=한계점><strong>한계점</strong>
<a class=anchor href=#%ed%95%9c%ea%b3%84%ec%a0%90>#</a></h2><p>사실 위와 같이 작업한다면, 이후 계속적으로 사람이 수작업으로 백업 — 삭제 — 리부팅을 해줘야 합니다. 운영 상 사람으로 발생하는 피해를 줄이기 위해서 자동화를 해주는 것이 좋습니다.</p><h2 id=reference><strong>Reference</strong>
<a class=anchor href=#reference>#</a></h2><ul><li><a href=https://docs.airbyte.com/understanding-airbyte/high-level-view>Understand Airbyte</a></li><li><a href=https://velog.io/@shj5508/Ubuntu-%EC%99%80-Docker-%EC%9A%A9%EB%9F%89-%ED%99%95%EC%9D%B8-%EB%B0%8F-%EA%B4%80%EB%A6%AC>Docker 용량 확인 및 관리</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/devseunggwan/commit/659a02947230de597a1759540856a1997a141ced title='Last modified by devSeungGwan | May 13, 2025' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>May 13, 2025</span></a></div><div><a class="flex align-center" href=https://github.com/devseunggwan/edit/main/exampleSite/content/docs/tech/airbyte/disk-issue.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#airbyte-운용-시-디스크-용량이-많이-찼을-때-확인해볼-수-있는-것들>Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들</a><ul><li><a href=#개요><strong>개요</strong></a></li><li><a href=#airbyte-운용-시-디스크-용량을-많이-차지하는-요소-확인><strong>Airbyte 운용 시 디스크 용량을 많이 차지하는 요소 확인</strong></a></li><li><a href=#airbyte-컨테이너-내부-확인><strong>Airbyte 컨테이너 내부 확인</strong></a></li><li><a href=#한계점><strong>한계점</strong></a></li><li><a href=#reference><strong>Reference</strong></a></li></ul></li></ul></nav></div></aside></main></body></html>