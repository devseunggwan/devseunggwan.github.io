<!doctype html><html lang=ko-kr dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항
  #


  

  개요
  #

EC2 내부에 docker-compose를 사용하여 Airbyte를 생성하고, Source는 AWS RDS 위에 운영되는 MySQL, Destination은 Snowflake로 각각 커넥터 설정을 하였습니다. 환경을 구성 후 CDC를 진행하며 겪었던 상황과 해결 방법을 작성하였습니다.


  1. MySQL에서 1억건 이상의 테이블에 대한 초기 마이그래이션 시 리소스 고려
  #

Airbyte는 CDC 이전 초기 연결 시 테이블에 대해 Source에서 Destination으로 마이그래이션을 진행합니다. 마이그래이션 시 RDS 리소스도 중요하지만 EC2 리소스를 더 많이 사용합니다. RDS는 Task 당 커넥션을 하나만 사용하지만, EC2는 돌아가고 있는 모든 Task들을 관리해야 하기 때문입니다."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://devseunggwan.github.io/docs/tech/airbyte/mysql-to-snowflake/"><meta property="og:site_name" content="devseunggwan"><meta property="og:title" content="Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항"><meta property="og:description" content="Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항 # 개요 # EC2 내부에 docker-compose를 사용하여 Airbyte를 생성하고, Source는 AWS RDS 위에 운영되는 MySQL, Destination은 Snowflake로 각각 커넥터 설정을 하였습니다. 환경을 구성 후 CDC를 진행하며 겪었던 상황과 해결 방법을 작성하였습니다.
1. MySQL에서 1억건 이상의 테이블에 대한 초기 마이그래이션 시 리소스 고려 # Airbyte는 CDC 이전 초기 연결 시 테이블에 대해 Source에서 Destination으로 마이그래이션을 진행합니다. 마이그래이션 시 RDS 리소스도 중요하지만 EC2 리소스를 더 많이 사용합니다. RDS는 Task 당 커넥션을 하나만 사용하지만, EC2는 돌아가고 있는 모든 Task들을 관리해야 하기 때문입니다."><meta property="og:locale" content="ko_kr"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-05-13T20:36:38+09:00"><title>Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항 | devseunggwan</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://devseunggwan.github.io/docs/tech/airbyte/mysql-to-snowflake/><link rel=stylesheet href=/book.min.d5c02c6e6410f6e4b2003a1c54170554f18e507efdc1850ce6fe85ce32f50496.css integrity="sha256-1cAsbmQQ9uSyADocVBcFVPGOUH79wYUM5v6FzjL1BJY=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.7d65a475a48172ceb58877b477af23f35d2ded8d6bf5d4ebeee295f2d26103e9.js integrity="sha256-fWWkdaSBcs61iHe0d68j810t7Y1r9dTr7uKV8tJhA+k=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>devseunggwan</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>Tech</span><ul><li><input type=checkbox id=section-a60fa73ba0ca5091982e66ba30dd6598 class=toggle checked>
<label for=section-a60fa73ba0ca5091982e66ba30dd6598 class="flex justify-between"><a role=button>Airbyte</a></label><ul><li><a href=/docs/tech/airbyte/installation/>Installation</a></li><li><a href=/docs/tech/airbyte/mysql-to-snowflake/ class=active>Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항</a></li><li><a href=/docs/tech/airbyte/disk-issue/>Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들</a></li></ul></li><li><input type=checkbox id=section-0df090beb6b8424476a21f6272de6438 class=toggle>
<label for=section-0df090beb6b8424476a21f6272de6438 class="flex justify-between"><a role=button>AWS</a></label><ul><li><a href=/docs/tech/aws/aws-lambda/>AWS Lambda 사용 경험 정리</a></li></ul></li><li><input type=checkbox id=section-57ccde6e58abfd82b4c0c706b6cd1770 class=toggle>
<label for=section-57ccde6e58abfd82b4c0c706b6cd1770 class="flex justify-between"><a role=button>Git</a></label><ul><li><a href=/docs/tech/git/gitleaks/>Gitleaks를 사용한 Git 비밀 유출 검사, 사용법</a></li></ul></li><li><input type=checkbox id=section-e13c1742298c6a8c23cd403840d50c94 class=toggle>
<label for=section-e13c1742298c6a8c23cd403840d50c94 class="flex justify-between"><a role=button>JS7 JobScheduler</a></label><ul><li><a href=/docs/tech/js7-jobscheduler/introduce/>Introduce</a></li><li><a href=/docs/tech/js7-jobscheduler/installation/>Installation</a></li><li><a href=/docs/tech/js7-jobscheduler/configuration/>Configuration</a></li></ul></li><li><input type=checkbox id=section-a85f1e2bfc3e5f90a036e102e5e53c6f class=toggle>
<label for=section-a85f1e2bfc3e5f90a036e102e5e53c6f class="flex justify-between"><a role=button>Langchain</a></label><ul><li><a href=/docs/tech/langchain/issue-unstructuredurlloader/>UnstructuredURLLoader 무한 로딩 해결</a></li></ul></li><li><input type=checkbox id=section-711ce98c05a75c48054a4227d171306e class=toggle>
<label for=section-711ce98c05a75c48054a4227d171306e class="flex justify-between"><a role=button>Python</a></label><ul><li><a href=/docs/tech/python/vscode-python-failed-to-resolve-env/>VSCode Python 익스텐션 에러 트러블 슈팅 (Failed to resolve env)</a></li><li><a href=/docs/tech/python/python-rocky-linux-installation/>폐쇄망에 Python 설치 (Rocky Linux 8.10, UV 사용)</a></li></ul></li></ul></li><li class=book-section-flat><span>Book</span><ul><li><input type=checkbox id=section-f41dde8d67e63c2fc20fc13a03f84626 class=toggle>
<label for=section-f41dde8d67e63c2fc20fc13a03f84626 class="flex justify-between"><a role=button>가상 면접 사례로 알아보는 대규모 시스템 설계 기초 1</a></label><ul></ul></li><li><input type=checkbox id=section-cb6caec5d5cb6384bd3b84b7946900c3 class=toggle>
<label for=section-cb6caec5d5cb6384bd3b84b7946900c3 class="flex justify-between"><a role=button>랄프 킴벌의 데이터 웨어하우스 툴킷(The Warehouse Toolkit)</a></label><ul></ul></li></ul></li><li class=book-section-flat><span>Think</span><ul></ul></li><li class=book-section-flat><span>Conference</span><ul></ul></li></ul><ul><li><a href=https://github.com/devseunggwan target=_blank rel=noopener>Github</a></li><li><a href=https://www.linkedin.com/in/seunggwan target=_blank rel=noopener>Linkedin</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#airbyte를-사용하여-mysql-to-snowflake-연결-시-고려-사항>Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항</a><ul><li><a href=#개요>개요</a></li><li><a href=#1-mysql에서-1억건-이상의-테이블에-대한-초기-마이그래이션-시-리소스-고려>1. MySQL에서 1억건 이상의 테이블에 대한 초기 마이그래이션 시 리소스 고려</a></li><li><a href=#2-cdc를-위한-rds-mysql-설정-수정>2. CDC를 위한 RDS MySQL 설정 수정</a></li><li><a href=#3-초기-mysql에서-snowflake-테이블-적재-시-대략적인-소요-시간>3. 초기 MySQL에서 Snowflake 테이블 적재 시 대략적인 소요 시간</a><ul><li></li></ul></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=airbyte를-사용하여-mysql-to-snowflake-연결-시-고려-사항>Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항
<a class=anchor href=#airbyte%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-mysql-to-snowflake-%ec%97%b0%ea%b2%b0-%ec%8b%9c-%ea%b3%a0%eb%a0%a4-%ec%82%ac%ed%95%ad>#</a></h1><p><img src=image.png alt=image></p><h2 id=개요>개요
<a class=anchor href=#%ea%b0%9c%ec%9a%94>#</a></h2><p>EC2 내부에 docker-compose를 사용하여 Airbyte를 생성하고, Source는 AWS RDS 위에 운영되는 MySQL, Destination은 Snowflake로 각각 커넥터 설정을 하였습니다. 환경을 구성 후 CDC를 진행하며 겪었던 상황과 해결 방법을 작성하였습니다.</p><hr><h2 id=1-mysql에서-1억건-이상의-테이블에-대한-초기-마이그래이션-시-리소스-고려>1. MySQL에서 1억건 이상의 테이블에 대한 초기 마이그래이션 시 리소스 고려
<a class=anchor href=#1-mysql%ec%97%90%ec%84%9c-1%ec%96%b5%ea%b1%b4-%ec%9d%b4%ec%83%81%ec%9d%98-%ed%85%8c%ec%9d%b4%eb%b8%94%ec%97%90-%eb%8c%80%ed%95%9c-%ec%b4%88%ea%b8%b0-%eb%a7%88%ec%9d%b4%ea%b7%b8%eb%9e%98%ec%9d%b4%ec%85%98-%ec%8b%9c-%eb%a6%ac%ec%86%8c%ec%8a%a4-%ea%b3%a0%eb%a0%a4>#</a></h2><p>Airbyte는 CDC 이전 초기 연결 시 테이블에 대해 Source에서 Destination으로 마이그래이션을 진행합니다. 마이그래이션 시 RDS 리소스도 중요하지만 EC2 리소스를 더 많이 사용합니다. RDS는 Task 당 커넥션을 하나만 사용하지만, EC2는 돌아가고 있는 모든 Task들을 관리해야 하기 때문입니다.</p><p>1억건 이상 테이블 당 마이그래이션 시 RDS 리소스는 db.m6i.2xlarge 기준 CPU 점유율이 2% 정도 상승하였습니다. 반면 EC2는 c7i.4xlarge 기준 CPU 점유율이 20% 되었습니다. 그래서 EC2 c7i.4xlarge 기준 1억건 이상 테이블을 5개 이상 한번에 적재하는 경우 CPU 리소스가 부족할 수 있습니다. 그래서 초기 마이그래이션 시 테이블 하나당 EC2 c7i.xlarge 기준으로 생각하여 고려하고 있는 병렬 처리 테이블 개수만큼 인스턴스 크기를 늘려서 짧은 시간에 마이그래이션을 완료할 수 있도록 합니다. CPU 리소스가 부족한 경우, Sync 과정에서 중지가 될 수 있으며 지금까지 받은 데이터를 모두 날리고 새로 받아야 하는 경우도 생길 수 있습니다.</p><hr><h2 id=2-cdc를-위한-rds-mysql-설정-수정>2. CDC를 위한 RDS MySQL 설정 수정
<a class=anchor href=#2-cdc%eb%a5%bc-%ec%9c%84%ed%95%9c-rds-mysql-%ec%84%a4%ec%a0%95-%ec%88%98%ec%a0%95>#</a></h2><p>시스템에서 사용하는 DB에는 별도 설정없이 기본값으로 사용하는 경우가 있습니다. 그런 경우 MySQL에서 복제, 동기화 등의 목적으로 사용하는 <code>binlog</code> 에 대한 설정도 기본값인 경우가 대부분입니다.</p><p>binlog 설정 시 확인했던 부분은 다음과 같습니다.</p><ul><li>binlog 확인: <code>SHOW binary logs;</code></li><li>RDS 내부 설정 확인: <code>CALL mysql.rds_show_configuration;</code></li></ul><p>설정 확인 후 MySQL에서 binlog를 수정한 내용은 다음과 같습니다.</p><ul><li>RDS 파라미터 그룹 수정<ul><li>RDS 파라미터 그룹은 MySQL 중지없이 설정 변경 시 즉시 적용되어 binlog 관련 설정을 운영에 지장없이 변경할 수 있었습니다.</li><li>binlog_format: MIXED -> ROW (CDC Required)</li><li>binlog_row_image: null(full) -> full (CDC Required)</li></ul></li><li>MySQL 내부에서 프로시저 실행<ul><li>해당 프로시저 또한 MySQL 중지없이 실행으로 설정을 변경할 수 있었습니다.<ul><li><code>CALL mysql.rds_set_configuration('binlog retention hours', 25);</code><ul><li>binlog에 대한 retention 시간을 25시간으로 두었기 때문에, 25시간 이상 간격이 필요한 CDC에는 설정값을 높힐 필요가 있습니다.</li></ul></li></ul></li></ul></li></ul><hr><h2 id=3-초기-mysql에서-snowflake-테이블-적재-시-대략적인-소요-시간>3. 초기 MySQL에서 Snowflake 테이블 적재 시 대략적인 소요 시간
<a class=anchor href=#3-%ec%b4%88%ea%b8%b0-mysql%ec%97%90%ec%84%9c-snowflake-%ed%85%8c%ec%9d%b4%eb%b8%94-%ec%a0%81%ec%9e%ac-%ec%8b%9c-%eb%8c%80%eb%9e%b5%ec%a0%81%ec%9d%b8-%ec%86%8c%ec%9a%94-%ec%8b%9c%ea%b0%84>#</a></h2><p>적재하는 Source나 Destination의 종류, Airbyte가 서비스되는 플랫폼의 종류 및 인프라 제원 등에 따라서 마이그래이션 시간은 상이할 수 있습니다. 이 부분을 참고하셔서 대략적으로 참고하실 수 있도록 테이블 마이그래이션 및 CDC 결과 공유드립니다.</p><h4 id=공통-사항>공통 사항
<a class=anchor href=#%ea%b3%b5%ed%86%b5-%ec%82%ac%ed%95%ad>#</a></h4><ul><li>EC2 인스턴스 크기: c7i.4xlarge</li></ul><h4 id=테이블-1>테이블 1
<a class=anchor href=#%ed%85%8c%ec%9d%b4%eb%b8%94-1>#</a></h4><ul><li>용량: 226.8GB</li><li>ROW: 약 430,000,000 (430M)</li><li>마이그래이션 시간: 약 7시간</li><li>CDC 시간: 평균 4~5만 Row 당 4분 소요</li><li>CDC 시 12~13% 소모</li></ul><h4 id=테이블-2>테이블 2
<a class=anchor href=#%ed%85%8c%ec%9d%b4%eb%b8%94-2>#</a></h4><ul><li>용량: 31.7GB</li><li>ROW: 약 42,000,000</li><li>마이그래이션 시간: 약 48분</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/devseunggwan/commit/659a02947230de597a1759540856a1997a141ced title='Last modified by devSeungGwan | May 13, 2025' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>May 13, 2025</span></a></div><div><a class="flex align-center" href=https://github.com/devseunggwan/edit/main/exampleSite/content/docs/tech/airbyte/mysql-to-snowflake.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#airbyte를-사용하여-mysql-to-snowflake-연결-시-고려-사항>Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항</a><ul><li><a href=#개요>개요</a></li><li><a href=#1-mysql에서-1억건-이상의-테이블에-대한-초기-마이그래이션-시-리소스-고려>1. MySQL에서 1억건 이상의 테이블에 대한 초기 마이그래이션 시 리소스 고려</a></li><li><a href=#2-cdc를-위한-rds-mysql-설정-수정>2. CDC를 위한 RDS MySQL 설정 수정</a></li><li><a href=#3-초기-mysql에서-snowflake-테이블-적재-시-대략적인-소요-시간>3. 초기 MySQL에서 Snowflake 테이블 적재 시 대략적인 소요 시간</a><ul><li></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>