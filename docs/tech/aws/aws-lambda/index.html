<!doctype html><html lang=ko-kr dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  AWS Lambda 사용 경험 정리
  #


  개요
  #


AWS Lambda 를 활용해 스크래핑 및 API를 통해 다양한 데이터를 수집하는 프로젝트를 진행하며 여러 운영 관점에서 중요한 고려 사항들을 직접 체험할 수 있었습니다.
Lambda를 사용하면서 마주한 비용 효율성, 리소스 관리, 모니터링, 디버깅 및 AWS의 기타 서비스와의 연계 시 고려해야 할 사항들을 정리해 봤습니다.



  Lambda 운영 관점에서의 고려 사항
  #


Lambda를 사용해서 소규모 작업 등을 자동화하여 관리할 때는 비용 및 리소스 관리 효율적입니다.

다만, 파이프라인 규모가 점차 늘어나서 대규모로 작업이 되어야 한다면 EC2 운용 비용보다 비싸지는 지점이 존재합니다.


메모리 총 사용량을 사용자가 지정할 수 있고, 사용한 메모리량에 따라 CPU 스펙과 비용이 최종 결정됩니다.

그렇기 떄문에 100만건 무료라도 많은 양의 메모리를 계속해서 사용한다면 프리티어를 금방 소진할 가능성이 높습니다.


Lambda의 모니터링은 AWS Cloudwatch로 하기 때문에 해당 비용 관리도 신경써야 합니다.

로그를 통해서 작업 상태를 기록하는 것은 중요하지만, 많은 양의 로그를 Cloudwatch로 적재하게 된다면 이 또한 비용이 많이 발생하게 됩니다.
그렇기 때문에 개발 후 Lambda를 운영하면서 적절하게 Log가 기록되는 지를 검토해야 합니다.


만약 15분 이상 한 작업에 대해서 Lambda에서 돌려야 한다면 동시성을 증가시켜 최대한 분산 처리를 하는 것을 추천드립니다.

재귀 방식으로 SQS, SNS, S3를 사용해 Lambda를 실행했을 때 최대 16번 이후로 
  재귀 루프 감지를 하게 됩니다. 이 경우 Lambda에서는 이벤트를 드랍하기 때문에 더 이상 실행할 수 없습니다. 강제로 재귀 루프 감지를 해제할 수는 있지만, 의도치 않은 상황에서 큰 리소스를 사용할 수 있기 때문입니다.


되도록 ARM 아키텍처를 Lambda에서 선택하여 사용하였습니다.

비용 및 성능이 기본적으로 x64 아키텍처보다 좋고, 컴퓨팅 운영을 사용자가 하지 않아도 되기 때문에  다른 서비스에서의 ARM 아키텍처  사용 난이도보다 비교적 낮기 때문입니다.
다만, 사용하는 언어나 비즈니스 로직에서 사용해야 하는 라이브러리 별로 제약 사항이 존재하기 떄문에 테스트 및 검토 후 사용해야 합니다.





  Python을 사용한 Lambda 함수 작성 시 고려 사항
  #



  Klayer 를 사용하여 Lambda에서 Python 실행 시 필요한 라이브러리를 가져왔습니다.

Lambda에서 Python 라이브러리를 사용할 때는 각 함수 별로 계층을 추가해서 사용해야 합니다. 매번 필요한 라이브러리를 정리해서 Lambda 계층을 만드는 것이 번거로운 작업이라 생각했습니다.
Lambda에서는 단순한 작업이 주로 이루어지는 것이 좋기 때문에 Klayer에서 제공해주는 라이브러리 내에서 최대한 처리하려고 하였습니다.


Python 라이브러리를 직접 Layer에 추가하는 경우는 다음과 같았습니다.

비즈니스 로직에 맞는 Klayer Layer가 없는 경우
Klayer Layer를 사용했는데 250MB Layer 용량 제한에 걸린 경우



  AWS Powertools를 사용하여 Lambda에서 로깅이나 모니터링 등 기능들을 추가할 수 있습니다.

Lambda를 처음 작업 시에 디버깅이 쉽지 않았던 경험이 있었습니다. 디버깅을 하기 위해 직접 코드를 작성할 필요 없이 AWS Powertool 에서 제공하는 기능을 사용하여 해결하였습니다.





  AWS SQS(Simple Queue Service)와 연동하여 사용 시 고려 사항
  #


Lambda에서 SQS 이벤트를 Consuming하는 Window Size에 따라서 처리하는 Lambda의 동시성의 차이가 발생할 수 있습니다.

만약 10개의 이벤트를 SQS로 날리고 Lambda에서의 Window size가 5라면 실행 시간이 충분히 길다 가정하여 2개의 동시성을 가집니다.
Lambda의 동시성은 1000이기 떄문에 처리하려는 비즈니스 요구사항에 따라서 Window Size를 조정하여 동시성을 낮춰야 합니다.
Window size에 따른 메시지를 처리할 수 있도록 구성해야 하고, 반대로 Window size가 너무 커서 Lambda가 전부 처리하지 못해 타임아웃이 나는 사항을 고려해야 합니다.



  공식 문서에서도 이야기되었지만, SQS의 가시성 제한 시간은 함수 타임 아웃의 6배로 설정해야 합니다.

이벤트가 실패할 경우, 재실행을 Lambda에서 할 수 있도록 설정해야 합니다. 네트워크 이슈나 원천 소스가 존재하는 서버의 이상으로 간헐적인 이슈가 발생할 수 있기 때문에 충분한 재실행으로 데이터를 수집할 수 있도록 하였습니다.





  Lambda 배포 관점에서 고려 사항
  #


Lambda를 배포할 때 Terraform을 사용하여 배포하였습니다.

Lambda를 사용하다 보면 여러 함수들을 생성 및 관리해야 하는 경우가 발생하였고, 이 때마다 계속 함수에 대한 설정을 GUI로 진행했는데 비효율적이였습니다.
AWS SAM이나 Serverless Framework 등 Lambda를 개발할 떄 사용할 수 있는 도구들이 존재하였지만 해당 도구들은 POC를 진행 후 사용하지 않기로 결정했습니다.
운영했던 Lambda는 EventBridge Scheduler, SQS 등도 함께 사용하여 데이터 파이프라인을 구성했기 때문에 해당 아키텍처를 함께 배포하거나 내려야 하는 등 요구사항도 존재하여, Terraform을 채택하였습니다.
Python 코드와 Terraform 코드를 묶어서 관리하였고, 모노레포로 관리하여 효율성을 높혔습니다. 이렇게 작업했을 경우, Lambda 함수 및 플랫폼이 Git을 통한 버저닝과 CI/CD를 연결이 가능했습니다.


"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://devseunggwan.github.io/docs/tech/aws/aws-lambda/"><meta property="og:site_name" content="데브승관"><meta property="og:title" content="AWS Lambda 사용 경험 정리"><meta property="og:description" content="AWS Lambda 사용 경험 정리 # 개요 # AWS Lambda 를 활용해 스크래핑 및 API를 통해 다양한 데이터를 수집하는 프로젝트를 진행하며 여러 운영 관점에서 중요한 고려 사항들을 직접 체험할 수 있었습니다. Lambda를 사용하면서 마주한 비용 효율성, 리소스 관리, 모니터링, 디버깅 및 AWS의 기타 서비스와의 연계 시 고려해야 할 사항들을 정리해 봤습니다. Lambda 운영 관점에서의 고려 사항 # Lambda를 사용해서 소규모 작업 등을 자동화하여 관리할 때는 비용 및 리소스 관리 효율적입니다. 다만, 파이프라인 규모가 점차 늘어나서 대규모로 작업이 되어야 한다면 EC2 운용 비용보다 비싸지는 지점이 존재합니다. 메모리 총 사용량을 사용자가 지정할 수 있고, 사용한 메모리량에 따라 CPU 스펙과 비용이 최종 결정됩니다. 그렇기 떄문에 100만건 무료라도 많은 양의 메모리를 계속해서 사용한다면 프리티어를 금방 소진할 가능성이 높습니다. Lambda의 모니터링은 AWS Cloudwatch로 하기 때문에 해당 비용 관리도 신경써야 합니다. 로그를 통해서 작업 상태를 기록하는 것은 중요하지만, 많은 양의 로그를 Cloudwatch로 적재하게 된다면 이 또한 비용이 많이 발생하게 됩니다. 그렇기 때문에 개발 후 Lambda를 운영하면서 적절하게 Log가 기록되는 지를 검토해야 합니다. 만약 15분 이상 한 작업에 대해서 Lambda에서 돌려야 한다면 동시성을 증가시켜 최대한 분산 처리를 하는 것을 추천드립니다. 재귀 방식으로 SQS, SNS, S3를 사용해 Lambda를 실행했을 때 최대 16번 이후로 재귀 루프 감지를 하게 됩니다. 이 경우 Lambda에서는 이벤트를 드랍하기 때문에 더 이상 실행할 수 없습니다. 강제로 재귀 루프 감지를 해제할 수는 있지만, 의도치 않은 상황에서 큰 리소스를 사용할 수 있기 때문입니다. 되도록 ARM 아키텍처를 Lambda에서 선택하여 사용하였습니다. 비용 및 성능이 기본적으로 x64 아키텍처보다 좋고, 컴퓨팅 운영을 사용자가 하지 않아도 되기 때문에 다른 서비스에서의 ARM 아키텍처 사용 난이도보다 비교적 낮기 때문입니다. 다만, 사용하는 언어나 비즈니스 로직에서 사용해야 하는 라이브러리 별로 제약 사항이 존재하기 떄문에 테스트 및 검토 후 사용해야 합니다. Python을 사용한 Lambda 함수 작성 시 고려 사항 # Klayer 를 사용하여 Lambda에서 Python 실행 시 필요한 라이브러리를 가져왔습니다. Lambda에서 Python 라이브러리를 사용할 때는 각 함수 별로 계층을 추가해서 사용해야 합니다. 매번 필요한 라이브러리를 정리해서 Lambda 계층을 만드는 것이 번거로운 작업이라 생각했습니다. Lambda에서는 단순한 작업이 주로 이루어지는 것이 좋기 때문에 Klayer에서 제공해주는 라이브러리 내에서 최대한 처리하려고 하였습니다. Python 라이브러리를 직접 Layer에 추가하는 경우는 다음과 같았습니다. 비즈니스 로직에 맞는 Klayer Layer가 없는 경우 Klayer Layer를 사용했는데 250MB Layer 용량 제한에 걸린 경우 AWS Powertools를 사용하여 Lambda에서 로깅이나 모니터링 등 기능들을 추가할 수 있습니다. Lambda를 처음 작업 시에 디버깅이 쉽지 않았던 경험이 있었습니다. 디버깅을 하기 위해 직접 코드를 작성할 필요 없이 AWS Powertool 에서 제공하는 기능을 사용하여 해결하였습니다. AWS SQS(Simple Queue Service)와 연동하여 사용 시 고려 사항 # Lambda에서 SQS 이벤트를 Consuming하는 Window Size에 따라서 처리하는 Lambda의 동시성의 차이가 발생할 수 있습니다. 만약 10개의 이벤트를 SQS로 날리고 Lambda에서의 Window size가 5라면 실행 시간이 충분히 길다 가정하여 2개의 동시성을 가집니다. Lambda의 동시성은 1000이기 떄문에 처리하려는 비즈니스 요구사항에 따라서 Window Size를 조정하여 동시성을 낮춰야 합니다. Window size에 따른 메시지를 처리할 수 있도록 구성해야 하고, 반대로 Window size가 너무 커서 Lambda가 전부 처리하지 못해 타임아웃이 나는 사항을 고려해야 합니다. 공식 문서에서도 이야기되었지만, SQS의 가시성 제한 시간은 함수 타임 아웃의 6배로 설정해야 합니다. 이벤트가 실패할 경우, 재실행을 Lambda에서 할 수 있도록 설정해야 합니다. 네트워크 이슈나 원천 소스가 존재하는 서버의 이상으로 간헐적인 이슈가 발생할 수 있기 때문에 충분한 재실행으로 데이터를 수집할 수 있도록 하였습니다. Lambda 배포 관점에서 고려 사항 # Lambda를 배포할 때 Terraform을 사용하여 배포하였습니다. Lambda를 사용하다 보면 여러 함수들을 생성 및 관리해야 하는 경우가 발생하였고, 이 때마다 계속 함수에 대한 설정을 GUI로 진행했는데 비효율적이였습니다. AWS SAM이나 Serverless Framework 등 Lambda를 개발할 떄 사용할 수 있는 도구들이 존재하였지만 해당 도구들은 POC를 진행 후 사용하지 않기로 결정했습니다. 운영했던 Lambda는 EventBridge Scheduler, SQS 등도 함께 사용하여 데이터 파이프라인을 구성했기 때문에 해당 아키텍처를 함께 배포하거나 내려야 하는 등 요구사항도 존재하여, Terraform을 채택하였습니다. Python 코드와 Terraform 코드를 묶어서 관리하였고, 모노레포로 관리하여 효율성을 높혔습니다. 이렇게 작업했을 경우, Lambda 함수 및 플랫폼이 Git을 통한 버저닝과 CI/CD를 연결이 가능했습니다."><meta property="og:locale" content="ko_kr"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-05-14T01:52:16+00:00"><title>AWS Lambda 사용 경험 정리 | 데브승관</title>
<link rel=icon href=/favicon.ico><link rel=manifest href=/manifest.json><link rel=canonical href=https://devseunggwan.github.io/docs/tech/aws/aws-lambda/><link rel=stylesheet href=/book.min.d5c02c6e6410f6e4b2003a1c54170554f18e507efdc1850ce6fe85ce32f50496.css integrity="sha256-1cAsbmQQ9uSyADocVBcFVPGOUH79wYUM5v6FzjL1BJY=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.7d65a475a48172ceb58877b477af23f35d2ded8d6bf5d4ebeee295f2d26103e9.js integrity="sha256-fWWkdaSBcs61iHe0d68j810t7Y1r9dTr7uKV8tJhA+k=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-ND4BZG3LS1"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ND4BZG3LS1")}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/icon.png alt=Logo class=book-icon><span>데브승관</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>Tech</span><ul><li><input type=checkbox id=section-a60fa73ba0ca5091982e66ba30dd6598 class=toggle>
<label for=section-a60fa73ba0ca5091982e66ba30dd6598 class="flex justify-between"><a role=button>Airbyte</a></label><ul><li><a href=/docs/tech/airbyte/installation/>Installation</a></li><li><a href=/docs/tech/airbyte/mysql-to-snowflake/>Airbyte를 사용하여 MySQL to Snowflake 연결 시 고려 사항</a></li><li><a href=/docs/tech/airbyte/disk-issue/>Airbyte 운용 시 디스크 용량이 많이 찼을 때 확인해볼 수 있는 것들</a></li></ul></li><li><input type=checkbox id=section-0df090beb6b8424476a21f6272de6438 class=toggle checked>
<label for=section-0df090beb6b8424476a21f6272de6438 class="flex justify-between"><a role=button>AWS</a></label><ul><li><a href=/docs/tech/aws/aws-lambda/ class=active>AWS Lambda 사용 경험 정리</a></li></ul></li><li><input type=checkbox id=section-57ccde6e58abfd82b4c0c706b6cd1770 class=toggle>
<label for=section-57ccde6e58abfd82b4c0c706b6cd1770 class="flex justify-between"><a role=button>Git</a></label><ul><li><a href=/docs/tech/git/gitleaks/>Gitleaks를 사용한 Git 비밀 유출 검사, 사용법</a></li></ul></li><li><input type=checkbox id=section-e13c1742298c6a8c23cd403840d50c94 class=toggle>
<label for=section-e13c1742298c6a8c23cd403840d50c94 class="flex justify-between"><a role=button>JS7 JobScheduler</a></label><ul><li><a href=/docs/tech/js7-jobscheduler/introduce/>Introduce</a></li><li><a href=/docs/tech/js7-jobscheduler/installation/>Installation</a></li><li><a href=/docs/tech/js7-jobscheduler/configuration/>Configuration</a></li></ul></li><li><input type=checkbox id=section-a85f1e2bfc3e5f90a036e102e5e53c6f class=toggle>
<label for=section-a85f1e2bfc3e5f90a036e102e5e53c6f class="flex justify-between"><a role=button>Langchain</a></label><ul><li><a href=/docs/tech/langchain/issue-unstructuredurlloader/>UnstructuredURLLoader 무한 로딩 해결</a></li></ul></li><li><input type=checkbox id=section-711ce98c05a75c48054a4227d171306e class=toggle>
<label for=section-711ce98c05a75c48054a4227d171306e class="flex justify-between"><a role=button>Python</a></label><ul><li><a href=/docs/tech/python/vscode-python-failed-to-resolve-env/>VSCode Python 익스텐션 에러 트러블 슈팅 (Failed to resolve env)</a></li><li><a href=/docs/tech/python/python-rocky-linux-installation/>폐쇄망에 Python 설치 (Rocky Linux 8.10, UV 사용)</a></li></ul></li></ul></li><li class=book-section-flat><span>Book</span><ul><li><input type=checkbox id=section-f41dde8d67e63c2fc20fc13a03f84626 class=toggle>
<label for=section-f41dde8d67e63c2fc20fc13a03f84626 class="flex justify-between"><a role=button>가상 면접 사례로 알아보는 대규모 시스템 설계 기초 1</a></label><ul></ul></li><li><input type=checkbox id=section-cb6caec5d5cb6384bd3b84b7946900c3 class=toggle>
<label for=section-cb6caec5d5cb6384bd3b84b7946900c3 class="flex justify-between"><a role=button>랄프 킴벌의 데이터 웨어하우스 툴킷(The Warehouse Toolkit)</a></label><ul></ul></li></ul></li><li class=book-section-flat><span>Think</span><ul></ul></li><li class=book-section-flat><span>Conference</span><ul></ul></li></ul><ul><li><a href=https://github.com/devseunggwan target=_blank rel=noopener>Github</a></li><li><a href=https://www.linkedin.com/in/seunggwan target=_blank rel=noopener>Linkedin</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>AWS Lambda 사용 경험 정리</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#aws-lambda-사용-경험-정리>AWS Lambda 사용 경험 정리</a><ul><li><a href=#개요>개요</a></li><li><a href=#lambda-운영-관점에서의-고려-사항>Lambda 운영 관점에서의 고려 사항</a></li><li><a href=#python을-사용한-lambda-함수-작성-시-고려-사항>Python을 사용한 Lambda 함수 작성 시 고려 사항</a></li><li><a href=#aws-sqssimple-queue-service와-연동하여-사용-시-고려-사항>AWS SQS(Simple Queue Service)와 연동하여 사용 시 고려 사항</a></li><li><a href=#lambda-배포-관점에서-고려-사항>Lambda 배포 관점에서 고려 사항</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=aws-lambda-사용-경험-정리>AWS Lambda 사용 경험 정리
<a class=anchor href=#aws-lambda-%ec%82%ac%ec%9a%a9-%ea%b2%bd%ed%97%98-%ec%a0%95%eb%a6%ac>#</a></h1><h2 id=개요>개요
<a class=anchor href=#%ea%b0%9c%ec%9a%94>#</a></h2><ul><li>AWS Lambda 를 활용해 스크래핑 및 API를 통해 다양한 데이터를 수집하는 프로젝트를 진행하며 여러 운영 관점에서 중요한 고려 사항들을 직접 체험할 수 있었습니다.</li><li>Lambda를 사용하면서 마주한 비용 효율성, 리소스 관리, 모니터링, 디버깅 및 AWS의 기타 서비스와의 연계 시 고려해야 할 사항들을 정리해 봤습니다.</li></ul><hr><h2 id=lambda-운영-관점에서의-고려-사항>Lambda 운영 관점에서의 고려 사항
<a class=anchor href=#lambda-%ec%9a%b4%ec%98%81-%ea%b4%80%ec%a0%90%ec%97%90%ec%84%9c%ec%9d%98-%ea%b3%a0%eb%a0%a4-%ec%82%ac%ed%95%ad>#</a></h2><ul><li>Lambda를 사용해서 소규모 작업 등을 자동화하여 관리할 때는 비용 및 리소스 관리 효율적입니다.<ul><li>다만, 파이프라인 규모가 점차 늘어나서 대규모로 작업이 되어야 한다면 EC2 운용 비용보다 비싸지는 지점이 존재합니다.</li></ul></li><li>메모리 총 사용량을 사용자가 지정할 수 있고, 사용한 메모리량에 따라 CPU 스펙과 비용이 최종 결정됩니다.<ul><li>그렇기 떄문에 100만건 무료라도 많은 양의 메모리를 계속해서 사용한다면 프리티어를 금방 소진할 가능성이 높습니다.</li></ul></li><li>Lambda의 모니터링은 AWS Cloudwatch로 하기 때문에 해당 비용 관리도 신경써야 합니다.<ul><li>로그를 통해서 작업 상태를 기록하는 것은 중요하지만, 많은 양의 로그를 Cloudwatch로 적재하게 된다면 이 또한 비용이 많이 발생하게 됩니다.</li><li>그렇기 때문에 개발 후 Lambda를 운영하면서 적절하게 Log가 기록되는 지를 검토해야 합니다.</li></ul></li><li>만약 15분 이상 한 작업에 대해서 Lambda에서 돌려야 한다면 동시성을 증가시켜 최대한 분산 처리를 하는 것을 추천드립니다.<ul><li>재귀 방식으로 SQS, SNS, S3를 사용해 Lambda를 실행했을 때 최대 16번 이후로
<a href=https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/invocation-recursion.html>재귀 루프 감지</a>를 하게 됩니다. 이 경우 Lambda에서는 이벤트를 드랍하기 때문에 더 이상 실행할 수 없습니다. 강제로 재귀 루프 감지를 해제할 수는 있지만, 의도치 않은 상황에서 큰 리소스를 사용할 수 있기 때문입니다.</li></ul></li><li>되도록 ARM 아키텍처를 Lambda에서 선택하여 사용하였습니다.<ul><li>비용 및 성능이 기본적으로 x64 아키텍처보다 좋고, 컴퓨팅 운영을 사용자가 하지 않아도 되기 때문에 다른 서비스에서의 ARM 아키텍처 사용 난이도보다 비교적 낮기 때문입니다.</li><li>다만, 사용하는 언어나 비즈니스 로직에서 사용해야 하는 라이브러리 별로 제약 사항이 존재하기 떄문에 테스트 및 검토 후 사용해야 합니다.</li></ul></li></ul><hr><h2 id=python을-사용한-lambda-함수-작성-시-고려-사항>Python을 사용한 Lambda 함수 작성 시 고려 사항
<a class=anchor href=#python%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%9c-lambda-%ed%95%a8%ec%88%98-%ec%9e%91%ec%84%b1-%ec%8b%9c-%ea%b3%a0%eb%a0%a4-%ec%82%ac%ed%95%ad>#</a></h2><ul><li><a href=https://github.com/keithrozario/Klayers>Klayer</a> 를 사용하여 Lambda에서 Python 실행 시 필요한 라이브러리를 가져왔습니다.<ul><li>Lambda에서 Python 라이브러리를 사용할 때는 각 함수 별로 계층을 추가해서 사용해야 합니다. 매번 필요한 라이브러리를 정리해서 Lambda 계층을 만드는 것이 번거로운 작업이라 생각했습니다.</li><li>Lambda에서는 단순한 작업이 주로 이루어지는 것이 좋기 때문에 Klayer에서 제공해주는 라이브러리 내에서 최대한 처리하려고 하였습니다.</li></ul></li><li>Python 라이브러리를 직접 Layer에 추가하는 경우는 다음과 같았습니다.<ul><li>비즈니스 로직에 맞는 Klayer Layer가 없는 경우</li><li>Klayer Layer를 사용했는데 250MB Layer 용량 제한에 걸린 경우</li></ul></li><li><a href=https://docs.powertools.aws.dev/lambda/python/3.8.0/>AWS Powertools</a>를 사용하여 Lambda에서 로깅이나 모니터링 등 기능들을 추가할 수 있습니다.<ul><li>Lambda를 처음 작업 시에 디버깅이 쉽지 않았던 경험이 있었습니다. 디버깅을 하기 위해 직접 코드를 작성할 필요 없이 AWS Powertool 에서 제공하는 기능을 사용하여 해결하였습니다.</li></ul></li></ul><hr><h2 id=aws-sqssimple-queue-service와-연동하여-사용-시-고려-사항>AWS SQS(Simple Queue Service)와 연동하여 사용 시 고려 사항
<a class=anchor href=#aws-sqssimple-queue-service%ec%99%80-%ec%97%b0%eb%8f%99%ed%95%98%ec%97%ac-%ec%82%ac%ec%9a%a9-%ec%8b%9c-%ea%b3%a0%eb%a0%a4-%ec%82%ac%ed%95%ad>#</a></h2><ul><li>Lambda에서 SQS 이벤트를 Consuming하는 Window Size에 따라서 처리하는 Lambda의 동시성의 차이가 발생할 수 있습니다.<ul><li>만약 10개의 이벤트를 SQS로 날리고 Lambda에서의 Window size가 5라면 실행 시간이 충분히 길다 가정하여 2개의 동시성을 가집니다.</li><li>Lambda의 동시성은 1000이기 떄문에 처리하려는 비즈니스 요구사항에 따라서 Window Size를 조정하여 동시성을 낮춰야 합니다.</li><li>Window size에 따른 메시지를 처리할 수 있도록 구성해야 하고, 반대로 Window size가 너무 커서 Lambda가 전부 처리하지 못해 타임아웃이 나는 사항을 고려해야 합니다.</li></ul></li><li><a href=https://docs.aws.amazon.com/ko_kr/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-configure-lambda-function-trigger.html>공식 문서</a>에서도 이야기되었지만, SQS의 가시성 제한 시간은 함수 타임 아웃의 6배로 설정해야 합니다.<ul><li>이벤트가 실패할 경우, 재실행을 Lambda에서 할 수 있도록 설정해야 합니다. 네트워크 이슈나 원천 소스가 존재하는 서버의 이상으로 간헐적인 이슈가 발생할 수 있기 때문에 충분한 재실행으로 데이터를 수집할 수 있도록 하였습니다.</li></ul></li></ul><hr><h2 id=lambda-배포-관점에서-고려-사항>Lambda 배포 관점에서 고려 사항
<a class=anchor href=#lambda-%eb%b0%b0%ed%8f%ac-%ea%b4%80%ec%a0%90%ec%97%90%ec%84%9c-%ea%b3%a0%eb%a0%a4-%ec%82%ac%ed%95%ad>#</a></h2><ul><li>Lambda를 배포할 때 Terraform을 사용하여 배포하였습니다.<ul><li>Lambda를 사용하다 보면 여러 함수들을 생성 및 관리해야 하는 경우가 발생하였고, 이 때마다 계속 함수에 대한 설정을 GUI로 진행했는데 비효율적이였습니다.</li><li>AWS SAM이나 Serverless Framework 등 Lambda를 개발할 떄 사용할 수 있는 도구들이 존재하였지만 해당 도구들은 POC를 진행 후 사용하지 않기로 결정했습니다.</li><li>운영했던 Lambda는 EventBridge Scheduler, SQS 등도 함께 사용하여 데이터 파이프라인을 구성했기 때문에 해당 아키텍처를 함께 배포하거나 내려야 하는 등 요구사항도 존재하여, Terraform을 채택하였습니다.</li><li>Python 코드와 Terraform 코드를 묶어서 관리하였고, 모노레포로 관리하여 효율성을 높혔습니다. 이렇게 작업했을 경우, Lambda 함수 및 플랫폼이 Git을 통한 버저닝과 CI/CD를 연결이 가능했습니다.</li></ul></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/devseunggwan/commit/13bcf7c0a2673b08e99416776dc3b710d6630a69 title='Last modified by Seunggwan Song | May 14, 2025' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>May 14, 2025</span></a></div><div><a class="flex align-center" href=https://github.com/devseunggwan/edit/main/exampleSite/content/docs/tech/aws/aws-lambda.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#aws-lambda-사용-경험-정리>AWS Lambda 사용 경험 정리</a><ul><li><a href=#개요>개요</a></li><li><a href=#lambda-운영-관점에서의-고려-사항>Lambda 운영 관점에서의 고려 사항</a></li><li><a href=#python을-사용한-lambda-함수-작성-시-고려-사항>Python을 사용한 Lambda 함수 작성 시 고려 사항</a></li><li><a href=#aws-sqssimple-queue-service와-연동하여-사용-시-고려-사항>AWS SQS(Simple Queue Service)와 연동하여 사용 시 고려 사항</a></li><li><a href=#lambda-배포-관점에서-고려-사항>Lambda 배포 관점에서 고려 사항</a></li></ul></li></ul></nav></div></aside></main></body></html>